<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Palayam Lab</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(to bottom right, #007bff, #ffffff);
      color: #fff;
      text-align: center;
      overflow-x: hidden;
      min-height: 100vh;
    }
    nav {
      background-color: rgba(0, 0, 0, 0.2);
      padding: 15px;
      display: flex;
      justify-content: center;
      gap: 20px;
      animation: fadeIn 1.5s ease;
      flex-wrap: wrap;
    }
    nav a {
      color: #fff;
      text-decoration: none;
      font-weight: bold;
      transition: color 0.3s;
    }
    nav a:hover {
      color: #ffd700;
    }
    header {
      padding: 40px 20px;
      animation: popIn 1.5s ease;
    }
    header h1 {
      font-size: 3em;
      margin-bottom: 10px;
      cursor: pointer;
      transition: transform 0.3s ease;
      display: inline-block;
    }
    header h1:hover {
      transform: scale(1.05) rotate(-2deg);
      text-shadow: 0 0 10px #fff;
    }
    header p {
      font-size: 1.2em;
      margin-bottom: 20px;
    }
    .btn {
      background: #fff;
      color: #007bff;
      padding: 12px 24px;
      border-radius: 30px;
      text-decoration: none;
      font-weight: bold;
      transition: all 0.3s ease;
      display: inline-block;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      border: none;
      cursor: pointer;
      font-size: 1rem;
    }
    .btn:hover {
      background: #0056b3;
      color: #fff;
      transform: translateY(-2px);
    }
    .section {
      padding: 60px 20px;
      background: rgba(0, 0, 0, 0.1);
      margin: 20px auto;
      border-radius: 20px;
      max-width: 800px;
      width: 90%;
      animation: fadeInUp 1s ease;
      position: relative;
    }
    .section h2 {
      font-size: 2em;
      margin-bottom: 20px;
      position: relative;
      /* Flex to align badges */
      display: flex;
      align-items: center;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
    }
    .stream {
      background: #fff;
      color: #000;
      padding: 20px;
      border-radius: 12px;
      margin: 10px auto;
      max-width: 600px;
      transition: transform 0.3s ease;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    .stream:hover {
      transform: scale(1.03);
    }
    .stream h3 {
      margin: 0 0 10px;
    }
    .stream a.button-link {
      display: inline-block;
      margin-top: 10px;
      background: #007bff;
      color: #fff;
      padding: 8px 16px;
      border-radius: 6px;
      text-decoration: none;
      font-weight: bold;
      transition: background 0.3s ease;
    }
    .stream a.button-link:hover {
      background: #0056b3;
    }
    .kalikal {
      font-size: 1.5em;
      background: rgba(255, 255, 255, 0.2);
      padding: 20px;
      border-radius: 12px;
      margin: 20px auto;
      max-width: 400px;
      width: 90%;
      animation: bounce 2s infinite ease-in-out;
      backdrop-filter: blur(5px);
    }
    footer {
      padding: 20px;
      font-size: 0.9em;
      background: rgba(0, 0, 0, 0.2);
      margin-top: 40px;
    }
    .easter-egg {
      position: absolute;
      top: -20px;
      right: 10px;
      font-size: 40px;
      cursor: pointer;
      animation: bounce 1s infinite ease-in-out;
      z-index: 10;
      user-select: none;
    }
    
    /* Custom Toast Notification */
    .toast-container {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 1000;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .toast {
      background: rgba(0, 0, 0, 0.85);
      color: white;
      padding: 12px 24px;
      border-radius: 50px;
      font-size: 1rem;
      animation: slideUp 0.3s ease-out;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    /* AI Section Specifics */
    .ai-box {
        background: rgba(255, 255, 255, 0.95);
        color: #333;
        padding: 25px;
        border-radius: 15px;
        margin: 20px auto;
        max-width: 600px;
        text-align: left;
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }
    .ai-box h3 {
        color: #007bff;
        margin-top: 0;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }
    .ai-input-group {
        display: flex;
        gap: 10px;
        margin-top: 15px;
    }
    .ai-input {
        flex: 1;
        padding: 12px;
        border: 2px solid #ddd;
        border-radius: 8px;
        font-size: 1rem;
    }
    .ai-response {
        margin-top: 15px;
        padding: 15px;
        background: #f0f8ff;
        border-left: 4px solid #007bff;
        border-radius: 4px;
        font-style: italic;
        display: none; /* Hidden by default */
        animation: fadeIn 0.5s ease;
        line-height: 1.5;
    }
    .loading-pulse {
        display: inline-block;
        width: 10px;
        height: 10px;
        background-color: #007bff;
        border-radius: 50%;
        margin-left: 5px;
        animation: pulse 1s infinite;
    }

    /* Stock Widget Styles */
    .stock-container {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 20px;
        margin: 20px 0;
        background: #f8f9fa;
        padding: 15px;
        border-radius: 10px;
    }
    .stock-rate {
        font-size: 3.5em;
        font-weight: 800;
        transition: color 0.5s ease;
        line-height: 1;
    }
    .stock-icon-wrapper {
        width: 80px;
        height: 80px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: transform 0.5s ease;
    }
    .stock-icon-wrapper svg {
        width: 100%;
        height: 100%;
        stroke-width: 2.5px;
        stroke-linecap: round;
        stroke-linejoin: round;
    }

    /* Achievement Styles */
    .achievement-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }
    .achievement-card {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 12px;
      text-align: center;
      transition: all 0.3s ease;
      border: 1px solid #e9ecef;
      cursor: default;
    }
    .achievement-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      border-color: #f39c12;
      background: #fff;
    }
    .achievement-icon {
      font-size: 2.5em;
      margin-bottom: 10px;
      display: block;
      transition: transform 0.3s ease;
    }
    .achievement-card:hover .achievement-icon {
        transform: scale(1.2);
    }
    .achievement-title {
      font-size: 0.95em;
      font-weight: 700;
      color: #333;
      margin-bottom: 5px;
    }
    .achievement-desc {
      font-size: 0.75em;
      color: #666;
      line-height: 1.3;
    }

    /* Coupon Styles */
    .student-coupon {
      display: inline-block;
      background-color: #ff4757;
      color: white;
      font-size: 0.4em;
      padding: 8px 15px;
      border-radius: 4px;
      border: 2px dashed rgba(255,255,255,0.8);
      vertical-align: middle;
      transform: rotate(-3deg);
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      cursor: pointer;
      position: relative;
      transition: all 0.3s ease;
      font-weight: bold;
      letter-spacing: 0.5px;
    }
    .student-coupon:not(.torn):hover {
      transform: rotate(0deg) scale(1.1);
      background-color: #ff6b81;
      border-color: #fff;
    }
    .student-coupon::after {
        content: '‚úÇÔ∏è';
        font-size: 1.2em;
        margin-left: 8px;
        vertical-align: middle;
    }
    /* Torn State */
    .student-coupon.torn {
        background-color: #2ecc71;
        border-style: solid;
        border-color: #fff;
        transform: rotate(0deg) scale(1.05);
        cursor: default;
    }
    .student-coupon.torn::after {
        content: '‚úÖ';
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes popIn {
      0% { transform: scale(0.8); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }
    @keyframes slideUp {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    @keyframes pulse {
        0% { transform: scale(1); opacity: 1; }
        50% { transform: scale(1.5); opacity: 0.5; }
        100% { transform: scale(1); opacity: 1; }
    }
    
    .badge {
        background-color: #f39c12; 
        color: #fff; 
        padding: 5px 10px; 
        border-radius: 12px; 
        font-size: 0.5em;
        vertical-align: middle;
        display: inline-block;
        /* margin-left removed here since flex container handles gap */
    }
  </style>
</head>
<body>
  <nav>
    <a href="#">Home</a>
    <a href="#live">Features</a>
    <a href="#ai-zone">Lab</a>
    <a href="#">Contact</a>
  </nav>
  <header>
    <h1 id="logo">
        üß™ Palayam Lab
    </h1>
    <p><em>Speed That Hits Different üèéÔ∏èüí®</em></p>
    <a class="btn" href="#ai-zone">Visit the Lab ‚ú® ‚Üí</a>
  </header>

  <!-- AI Section -->
  <section class="section" id="ai-zone" style="background: rgba(0,0,0,0.2);">
      <h2>
          ü§ñ Palayam Lab 
          <span class="badge">BETA</span>
          <span class="student-coupon" onclick="tearCoupon(event)" title="Click to claim!">STUDENT DISCOUNT ( ST )</span>
      </h2>
      <p>Experimental features & Market Watch</p>

      <!-- Feature 1: Palayam Rate Today -->
      <div class="ai-box">
          <h3>üìä Palayam Rate Today <small>Live</small></h3>
          <p>Current market value of Palayam Fiber stocks. (Updates every 1 min)</p>
          
          <div class="stock-container">
            <!-- Inline SVG Container -->
            <div id="stockIconContainer" class="stock-icon-wrapper">
                <!-- SVG injected by JS -->
            </div>
            <div style="text-align: left;">
                <div class="stock-rate" id="stockRate">$120</div>
                <div style="font-size: 0.8rem; color: #666;" id="lastUpdate">Updated: Just now</div>
            </div>
          </div>
          
          <p style="font-size: 0.8em; color: #888; margin-top: 0;">*This number is completely random. Don't sell your house.</p>
      </div>

      <!-- Feature 2: Palayam Achievements -->
      <div class="ai-box">
          <h3>üèÜ Palayam Achievements <small>Hall of Fame</small></h3>
          
          <div class="achievement-grid">
            <div class="achievement-card">
              <span class="achievement-icon" style="display: flex; justify-content: center; align-items: center;">
                <!-- Custom SVG for Red Wrapper/Packet -->
                <svg width="1em" height="1em" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="10" y="10" width="80" height="80" fill="#E53935" rx="2" />
                    <rect x="5" y="5" width="90" height="90" stroke="#C62828" stroke-width="3" stroke-dasharray="4 4" rx="4" fill="none"/>
                    <circle cx="50" cy="50" r="28" stroke="#B71C1C" stroke-width="3" fill="#EF5350" />
                    <circle cx="50" cy="50" r="18" fill="#E53935" />
                    <path d="M25 25 Q 35 35 25 45" stroke="#FFCDD2" stroke-width="2" fill="none" />
                    <path d="M75 25 Q 65 35 75 45" stroke="#FFCDD2" stroke-width="2" fill="none" />
                    <path d="M25 75 Q 35 65 25 55" stroke="#B71C1C" stroke-width="2" fill="none" opacity="0.3" />
                </svg>
              </span>
              <div class="achievement-title">Kalikal King</div>
              <div class="achievement-desc">Most Kalikal in 24hrs (Record: 999)</div>
            </div>
            <div class="achievement-card">
              <span class="achievement-icon" style="display: flex; justify-content: center; align-items: center;">
                <!-- YouTube Icon SVG -->
                <svg viewBox="0 0 24 24" width="1em" height="1em" fill="#FF0000">
                  <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                </svg>
              </span>
              <div class="achievement-title">Show of the Year</div>
              <div class="achievement-desc">Midnight Faisuu Stream Special</div>
            </div>
            <div class="achievement-card">
              <span class="achievement-icon">üí¶</span>
              <div class="achievement-title">Biggest Oil up party</div>
              <div class="achievement-desc">Slippery surfaces everywhere</div>
            </div>
            <div class="achievement-card" style="grid-column: span 2;">
               <span class="achievement-icon" style="display: flex; justify-content: center; align-items: center;">
                   <!-- Custom Bunny Maid Icon -->
                   <svg width="1.2em" height="1.2em" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                      <!-- Left Ear -->
                      <path d="M30 65 Q 15 5 40 5 Q 55 35 45 65" fill="white" stroke="#333" stroke-width="2"/>
                      <path d="M33 60 Q 25 20 38 20 Q 45 40 40 60" fill="#FFC0CB" />
                      
                      <!-- Right Ear (Flopped slightly) -->
                      <path d="M70 65 Q 90 15 60 5 Q 45 35 55 65" fill="white" stroke="#333" stroke-width="2"/>
                      <path d="M67 60 Q 78 25 62 20 Q 55 40 60 60" fill="#FFC0CB" />
                      
                      <!-- Headband -->
                      <path d="M20 70 Q 50 50 80 70" stroke="white" stroke-width="10" stroke-linecap="round"/>
                      <path d="M20 70 Q 50 50 80 70" stroke="#ddd" stroke-width="2" fill="none" stroke-dasharray="4 2"/>
                      
                      <!-- Bowtie -->
                      <path d="M35 85 L 50 95 L 65 85 L 50 75 Z" fill="#1a1a1a" />
                      <circle cx="50" cy="85" r="6" fill="#000" />
                  </svg>
               </span>
               <div class="achievement-title">Worlds greatest cosplay convention</div>
               <div class="achievement-desc">Railway midnight cosplay</div>
            </div>
          </div>
      </div>
  </section>

  <section class="section" id="live">
    <h2>üì° LIVE FEEDS 
        <span class="badge">FAST AAYI KALIKKAM</span>
      <span class="easter-egg" id="oilEgg" title="Touch the coconut power!">ü™Ç</span>
    </h2>
    <div class="stream">
      <h3>üî• Faisuu Special Midnight Live üõ¢Ô∏è</h3>
      <p>Streaming straight from the terrace with a ring light and dreams.</p>
      <a class="button-link" href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank">Watch Live ‚Üí</a>
      <p><small>Join over 200K viewers now! üõ¢Ô∏è</small></p>
    </div>
    <div class="stream">
      <h3>üí∞ Faisu Bids</h3>
      <p>Place your bets on what Faisuu will break next. High stakes, low logic.</p>
      <a class="button-link" href="#" onclick="placeBid(event)">Start Bidding ‚Üí</a>
    </div>
  </section>

  <section class="kalikal">
    <div style="display: flex; align-items: center; justify-content: center; gap: 10px;">
        üßÆ NO. OF KALIKAL: <span id="kalikalCount">20</span> 
        <!-- Replaced Barrel with Bunny Maid SVG -->
        <span style="font-size: 1.5em; line-height: 0;">
             <svg width="1em" height="1em" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                  <!-- Left Ear -->
                  <path d="M30 65 Q 15 5 40 5 Q 55 35 45 65" fill="white" stroke="#333" stroke-width="2"/>
                  <path d="M33 60 Q 25 20 38 20 Q 45 40 40 60" fill="#FFC0CB" />
                  <!-- Right Ear -->
                  <path d="M70 65 Q 90 15 60 5 Q 45 35 55 65" fill="white" stroke="#333" stroke-width="2"/>
                  <path d="M67 60 Q 78 25 62 20 Q 55 40 60 60" fill="#FFC0CB" />
                  <!-- Headband -->
                  <path d="M20 70 Q 50 50 80 70" stroke="white" stroke-width="8" stroke-linecap="round"/>
                  <path d="M20 70 Q 50 50 80 70" stroke="#ddd" stroke-width="2" fill="none" stroke-dasharray="4 2"/>
                  <!-- Bowtie -->
                  <path d="M35 85 L 50 95 L 65 85 L 50 75 Z" fill="#1a1a1a" />
                  <circle cx="50" cy="85" r="6" fill="#000" />
              </svg>
        </span>
    </div>
  </section>

  <footer>
    <p>No buffering. No nonsense. Just Vibes. <br/> ¬© 2025 Palayam Lab Ltd.</p>
  </footer>

  <audio id="blastSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_9d703403fa.mp3?filename=explosion-6085.mp3"></audio>
  
  <div class="toast-container" id="toastContainer"></div>

  <script>
    // --- Gemini API Logic (Preserved for future use) ---
    const apiKey = ""; // Runtime provided

    async function callGemini(prompt, outputElementId) {
       // Logic retained but currently unused by Achievements
    }

    // --- Stock Rate Logic ---
    
    // SVG Templates for "Trend Up" and "Trend Down"
    const upSvg = `
        <svg viewBox="0 0 24 24" fill="none" stroke="#28a745">
            <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
            <polyline points="17 6 23 6 23 12"></polyline>
        </svg>
    `;
    
    const downSvg = `
        <svg viewBox="0 0 24 24" fill="none" stroke="#dc3545">
            <polyline points="23 18 13.5 8.5 8.5 13.5 1 6"></polyline>
            <polyline points="17 18 23 18 23 12"></polyline>
        </svg>
    `;

    function updateStockRate() {
        const rateEl = document.getElementById('stockRate');
        const iconContainer = document.getElementById('stockIconContainer');
        const updateEl = document.getElementById('lastUpdate');

        // Random value between 75 and 150
        const min = 75;
        const max = 150;
        const newRate = Math.floor(Math.random() * (max - min + 1)) + min;
        
        // Get previous rate (default to 100 if first run)
        let prevRate = parseInt(rateEl.dataset.prev || "100");

        // Animate out
        rateEl.style.opacity = 0;
        iconContainer.style.transform = "scale(0.8)";

        setTimeout(() => {
            // Set new values
            rateEl.innerText = `$${newRate}`;
            
            if (newRate >= prevRate) {
                // Stock UP (Green)
                rateEl.style.color = "#28a745"; 
                iconContainer.innerHTML = upSvg;
                showToast(`Palayam Rate UP! Now $${newRate}`, "üìà");
            } else {
                // Stock DOWN (Red)
                rateEl.style.color = "#dc3545"; 
                iconContainer.innerHTML = downSvg;
                showToast(`Palayam Rate DOWN! Now $${newRate}`, "üìâ");
            }

            // Save for next comparison
            rateEl.dataset.prev = newRate;
            
            // Update timestamp
            const now = new Date();
            updateEl.innerText = "Updated: " + now.toLocaleTimeString();

            // Animate in
            rateEl.style.opacity = 1;
            iconContainer.style.transform = "scale(1)";
        }, 300);
    }

    // Initialize Stock Logic
    updateStockRate(); // Run immediately
    setInterval(updateStockRate, 60000); // Run every 1 minute (60,000 ms)


    // --- Logic for the 'Kalikal' Counter (Updated for Medium Rate) ---
    const startTime = new Date("2025-04-16T00:00:00Z");
    const startCount = 20;
    const kalikalSpan = document.getElementById("kalikalCount");
    let currentCount = startCount;

    function updateKalikal() {
      const now = new Date();
      // Increase roughly every 30 seconds (Medium Rate)
      // 30000ms = 30s
      const diffMs = Math.abs(now - startTime); 
      const diffUnits = Math.floor(diffMs / 30000); // One unit every 30s
      const newCount = startCount + diffUnits;

      const step = () => {
        if (currentCount < newCount) {
          currentCount++;
          kalikalSpan.textContent = currentCount;
          requestAnimationFrame(step);
        } else {
            kalikalSpan.textContent = newCount;
        }
      }
      requestAnimationFrame(step);
    }
    
    updateKalikal();
    // Update every 30 seconds to match the calculation logic
    setInterval(updateKalikal, 30000); 

    // --- Toast Notification Logic ---
    function showToast(message, icon = 'üß™') {
      const container = document.getElementById('toastContainer');
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.innerHTML = `<span>${icon}</span> <span>${message}</span>`;
      container.appendChild(toast);

      setTimeout(() => {
        toast.style.opacity = '0';
        toast.style.transform = 'translateY(20px)';
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }
    
    // Updated Coupon Logic
    function tearCoupon(e) {
      e.stopPropagation(); // Prevent header/section click events if any
      const el = e.currentTarget;
      
      if(el.classList.contains('torn')) return; // Already claimed

      // Animate tear
      el.style.transform = "rotate(15deg) scale(1.1)"; // Shake slightly
      
      setTimeout(() => {
          // Change content and style
          el.innerHTML = "Student Discounts Unlocked! üéì";
          el.classList.add('torn');
          el.style.transform = "rotate(0deg) scale(1)"; // Reset transform but keep scale from class
          
          showToast("Discount unlocked! Show your ID at the junction.", "üéì");
      }, 200);
    }

    // --- Interaction Handlers ---
    document.getElementById("logo").addEventListener("click", () => {
      showToast("Welcome to Palayam Lab! üß™");
    });

    const oilEgg = document.getElementById("oilEgg");
    oilEgg.addEventListener("click", () => {
      const sound = document.getElementById("blastSound");
      sound.play().catch(e => console.log("Audio play failed:", e));
      
      oilEgg.style.transition = "transform 0.6s ease, opacity 0.6s ease";
      oilEgg.style.transform = "scale(4) rotate(1080deg)";
      oilEgg.style.opacity = 0;
      
      setTimeout(() => showToast("üí• BHOOM! Coconut power activated!", "ü••"), 600);
      
      setTimeout(() => {
        oilEgg.style.transition = "none";
        oilEgg.style.transform = "scale(1) rotate(0deg)";
        oilEgg.style.opacity = 1;
      }, 3000);
    });

    function placeBid(e) {
      if(e) e.preventDefault();
      const items = ["Power Cut", "Ring Light Fall", "Neighbor Yelling", "Rain"];
      const randomItem = items[Math.floor(Math.random() * items.length)];
      showToast(`Bid placed! You bet ‚Çπ500 on '${randomItem}'. Good luck! üé≤`);
    }
  </script>
</body>
</html>
